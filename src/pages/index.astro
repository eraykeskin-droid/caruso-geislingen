---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import Gallery from "../components/Gallery.astro";
import OpeningHours from "../components/OpeningHours.astro";
---

<Layout title="Shisha Bar & Lounge in Geislingen">
	<main>
		<Hero />

		<Gallery />

		<!-- Info Section: Öffnungszeiten + Kontakt -->
		<section
			id="info"
			class="py-24 px-6 bg-black border-t border-secondary/10"
		>
			<div class="max-w-4xl mx-auto">
				<div class="text-center mb-16">
					<h2
						class="text-3xl md:text-5xl uppercase tracking-tighter mb-4"
					>
						Besuche uns
					</h2>
					<div class="h-1 w-20 bg-secondary mx-auto"></div>
				</div>

				<div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-16">
					<!-- Öffnungszeiten -->
					<div class="flex flex-col">
						<h3
							class="text-xs uppercase tracking-[0.3em] text-secondary font-bold mb-6 flex items-center justify-center gap-2"
						>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="16"
								height="16"
								viewBox="0 0 24 24"
								fill="none"
								stroke="currentColor"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"
								><circle cx="12" cy="12" r="10"
								></circle><polyline points="12 6 12 12 16 14"
								></polyline>
							</svg>
							Öffnungszeiten
						</h3>
						<OpeningHours />
					</div>

					<!-- Kontakt & Adresse -->
					<div class="flex flex-col">
						<h3
							class="text-xs uppercase tracking-[0.3em] text-secondary font-bold mb-6 flex items-center justify-center gap-2"
						>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="16"
								height="16"
								viewBox="0 0 24 24"
								fill="none"
								stroke="currentColor"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"
								><path
									d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"
								></path><circle cx="12" cy="10" r="3"></circle>
							</svg>
							Kontakt & Adresse
						</h3>
						<div
							id="contact-info"
							class="w-full flex-1 bg-white/[0.02] border border-white/5 p-8 rounded-none space-y-6"
						>
							<!-- Rendered by client script -->
						</div>
					</div>
				</div>
			</div>
		</section>

		<script>
			const contactContainer = document.getElementById("contact-info");

			const defaults = {
				name: "[NAME]",
				street: "[STREET]",
				city: "[CITY]",
				phone: "[PHONE_NUMBER]",
				email: "[EMAIL_ADDRESS]",
				instagram: "[INSTAGRAM_USERNAME]",
			};

			async function loadContactInfo() {
				if (!contactContainer) return;

				try {
					const res = await fetch(
						"/api/get-website-data.php?t=" + Date.now()
					);
					const data = await res.json();
					const info =
						data.success && data.contact ? data.contact : defaults;
					renderContact(info);
				} catch (err) {
					console.error("Error loading contact info:", err);
					renderContact(defaults);
				}
			}

			function renderContact(info: any) {
				if (!contactContainer) return;
				contactContainer.innerHTML = `
					<div class="space-y-5">
						<div>
							<p class="text-white font-bold text-sm uppercase tracking-wider">${
								info.name || defaults.name
							}</p>
						</div>
						<div class="flex items-start gap-3 text-gray-400 text-sm">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#ffe08a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mt-0.5 shrink-0"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
							<div>
								<p>${info.street || defaults.street}</p>
								<p>${info.city || defaults.city}</p>
							</div>
						</div>
						<div class="flex items-center gap-3 text-sm">
							<a href="tel:${(info.phone || defaults.phone).replace(
								/\s/g,
								""
							)}" class="text-gray-400 hover:text-secondary transition-all flex items-center gap-3 group">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#ffe08a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
								${info.phone || defaults.phone}
							</a>
						</div>
						<div class="flex items-center gap-3 text-sm">
							<a href="mailto:${
								info.email || defaults.email
							}" class="text-gray-400 hover:text-secondary transition-all flex items-center gap-3 group">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#ffe08a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
								${info.email || defaults.email}
							</a>
						</div>
						<div class="flex items-center gap-3 text-sm">
							<a href="https://www.instagram.com/${
								info.instagram || defaults.instagram
							}/" target="_blank" class="text-gray-400 hover:text-secondary transition-all flex items-center gap-3 group">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#ffe08a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line></svg>
								@${info.instagram || defaults.instagram}
							</a>
						</div>
					</div>

					<div class="pt-6 border-t border-white/5">
						<a
							href="https://www.google.com/maps/place/Caruso/@48.6148702,9.8415781,17z/data=!3m1!4b1!4m6!3m5!1s0x479975488701b621:0x14ea1fa3b74faf7a!8m2!3d48.6148702!4d9.8415781!16s%2Fg%2F11rzhd3qh6?entry=ttu&g_ep=EgoyMDI2MDIxOC4wIKXMDSoASAFQAw%3D%3D"
							target="_blank"
							class="flex items-center justify-center gap-2 py-3 bg-white/[0.05] border border-white/10 text-[10px] uppercase tracking-widest font-bold text-gray-400 hover:text-secondary hover:border-secondary/30 transition-all"
						>
							<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#ffe08a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg>
							Route planen
						</a>
					</div>
				`;
			}

			loadContactInfo();
		</script>
	</main>
</Layout>

<style></style>
